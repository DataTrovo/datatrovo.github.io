<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Git - DataTrovo Documentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">DataTrovo Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Developers</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../developer/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Git</a>
</li>
                                    
<li>
    <a href="../direct-sql/" class="dropdown-item">Direct SQL</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../../business/" class="nav-link">Business Teams</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../developer/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../direct-sql/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#git-connection" class="nav-link">Git Connection</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#set-up-git-connections" class="nav-link">Set Up Git Connections</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#syntactic-sugar" class="nav-link">Syntactic Sugar</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#docker" class="nav-link">Docker</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="git-connection">Git Connection</h1>
<p>Integrating Git with DataTrovo allows you to execute your scripts directly from a Git repository. This is beneficial for managing scripts via version control and aligning DataTrovo with your team’s existing workflows.</p>
<p>Use <strong>syntactic sugar</strong> to define your queries and let DataTrovo index the metadata, giving your team the flexibility to make scripts searchable, executable, and shareable across the organization.</p>
<p>Leverage <strong>Docker</strong> to create a custom execution environment for your scripts. This allows your team to define and manage dependencies and configurations for any project.</p>
<p>Currently, DataTrovo supports the following Git repositories:</p>
<ol>
<li>GitHub</li>
</ol>
<h2 id="set-up-git-connections">Set Up Git Connections</h2>
<p>To connect to your Git repository in DataTrovo:</p>
<ol>
<li>Go to <strong>Settings</strong> &gt; <strong>Secrets</strong> &gt; <strong>+</strong> to add all required environment variables for your scripts.<br />
<em>A symmetric key is used to encrypt environment variables.</em>  </li>
<li>Go to <strong>Settings</strong> &gt; <strong>Connections</strong> &gt; <strong>+</strong> to create a new connection.  </li>
<li>Select one of the supported repository providers.  </li>
<li>Fill in the required connection details.<br />
<em>A symmetric key is used to encrypt PAT keys.</em>  </li>
<li>DataTrovo will test and save the connection.</li>
</ol>
<h2 id="syntactic-sugar">Syntactic Sugar</h2>
<p>“Syntactic sugar” in DataTrovo allows you to embed metadata in your scripts so the platform can automatically index it. This metadata can include:</p>
<p>The following comment structure is used for the respective languages:</p>
<ul>
<li>Python: <code>#&gt;</code></li>
<li>R: <code>#&gt;</code></li>
<li>SQL: <code>--&gt;</code></li>
</ul>
<h3 id="required-metadata">Required Metadata</h3>
<ul>
<li><strong>title</strong> — The script’s title as displayed in DataTrovo.  </li>
<li><strong>description</strong> — A brief script description displayed in DataTrovo.  </li>
<li><strong>run</strong> — The command used to run the script. You can use <code>{file_path}</code> to reference the script.  </li>
<li><strong>output</strong> — The name of the output file generated in the project’s root directory.</li>
</ul>
<h3 id="optional-metadata">Optional Metadata</h3>
<ul>
<li><strong>environment</strong> — A list of environment variables that the script requires.</li>
</ul>
<h3 id="additional-metadata-as-tags">Additional Metadata as Tags</h3>
<p>Any additional metadata beyond the above required fields is indexed as tags. This can include authors, dates, columns, or any other information. These tags are searchable and visible in the DataTrovo UI.</p>
<h3 id="examples">Examples</h3>
<p><strong>.SQL Example</strong>:</p>
<pre><code class="language-sql">--&gt; title: Top 100 facilities
--&gt; description: Download the top 100 facilities
--&gt; environment: [PGHOST, PGPORT, PGDATABASE, PGUSER, PGPASSWORD]
--&gt; columns: [facility_name, state, county]
--&gt; run: &quot;sh -c 'psql -f {file_path} --csv &gt; output.csv'&quot;
--&gt; output: &quot;output.csv&quot;
--&gt; author: [John Doe]
</code></pre>
<p><strong>.R Example</strong>:</p>
<pre><code class="language-r">#&gt; title: R Top 100 facilities
#&gt; description: Download the top 100 facilities using R
#&gt; author: [R Master]
#&gt; environment: [PGHOST, PGPORT, PGDATABASE, PGUSER, PGPASSWORD]
#&gt; columns: [facility_name, state, county]
#&gt; run: &quot;Rscript {file_path}&quot;
#&gt; output: &quot;facilities_data.xlsx&quot;
</code></pre>
<h2 id="docker">Docker</h2>
<p>Example Files:</p>
<ul>
<li><a href="https://github.com/DataTrovo/postgres-example/blob/main/Dockerfile">SQL Example</a></li>
<li><a href="https://github.com/DataTrovo/r-example/blob/main/Dockerfile">R Example</a></li>
</ul>
<p>Each repository should include <strong>one</strong> Dockerfile in the root directory. This Dockerfile is used to build the execution environment for your scripts. The primary requirement is that the working directory be set to <code>/app</code>, as DataTrovo mounts your scripts into <code>/app</code> when the container starts.</p>
<p>DataTrovo automatically rebuilds the Docker image whenever the Dockerfile changes, allowing you to modify scripts without incurring the overhead of a full image rebuild every time. This is achieved by volume-mounting the scripts into the container. However, this approach can cause certain limitations. For example, any dependencies installed in the project’s root directory will be overwritten when the scripts are volume-mounted.</p>
<p>This limitation can be avoided by installing dependencies in a temporary directory and copying the dependencies into the working directory at container startup.</p>
<p><strong>Example Operations in the Dockerfile</strong>:</p>
<pre><code># Use a temporary directory for installing dependencies
WORKDIR /opt/app

# Install packages (e.g., using renv for R)
RUN Rscript -e &quot;renv::restore()&quot;

# Reset the working directory to /app
WORKDIR /app

# On container startup, copy the script into /app
ENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;cp -r /opt/app/renv/library/ /app/renv/ &amp;&amp; exec \&quot;$@\&quot;&quot;, &quot;--&quot;]
</code></pre>
<p>In this example, dependencies are installed in a subdirectory <code>(/opt/app)</code>, then the script is copied over at container startup, avoiding conflicts due to volume mounting.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
